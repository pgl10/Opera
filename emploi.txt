
Opera est un programme qui permet d'effectuer les 4 opérations arithmétiques de base 
sur des nombres rationnels représentés par des fractions de deux entiers aussi grands 
que nécessaires. Il a deux modes de fonctionnement : l'exécution d'un fichier de commandes 
et le mode conversationnel. C'est un programme interactif qui lit, interprète, calcule et 
archive les résultats des instructions écrites selon les règles prévues et exposées ci-après.

Le mode fichier de commandes est utilisable au début de la session par l'intermédiaire d'un 
fichier batch qui désigne le fichier des instructions à exécuter. Le mode conversationnel 
est automatiquement utilisé ensuite jusqu'à la fin de la session. En utilisant au début 
le fichier opera.exe on commence directement en phase conversationnelle.

Les nombres rationnels utilisés sont définis par un nom et une valeur. Le nom commence par 
une lettre et comporte seulement les caractères : lettres et chiffres auxquels on joint le 
caractère _ pour pouvoir indiquer un nom composé de plusieurs mots. Ainsi, par exemple : 
Paris_Brest est un nom reconnu et utilisable. La valeur de chaque nombre rationnel est stockée 
en mémoire par deux entiers : le numérateur et le dénominateur aussi grands que nécessaires 
et ceux-ci sont réduits automatiquement sans aucun diviseur commun. Qui peut le plus, peut 
le moins : les calculs avec les nombres entiers sont possibles aussi et de même pour les 
calculs avec entiers et rationnels conjointement.

Le programme assure la gestion des variables qui sont activées pendant la session. Quand la 
session est terminée la liste des variables qui sont encore disponibles est perdue, mais on 
peut l'archiver dans un fichier de sauvegarde.

Une ligne qui commence par : # est une ligne de commentaires. Il n'est pas admis de mettre 
des commentaires à la fin des instructions.

Les 4 opérateurs : + - * et / signifient : additionner, soustraire, multiplier et diviser.

Voici une série d'exemples d'instructions de base qui sont reconnues :
> a = 3/7   pour créer la variable a
> b = a+2
> c = b*b
> d = c-6
> r = a/b
> c         pour afficher la valeur actuelle de c
> 2*c       pour faire ce calcul et afficher le résultat
> 5-3       résultat : 2
> 5--3      résultat : 8 { 5 -(-3) }
> -5--7     résultat : 2
> x+y
> x+-y
> -x+y
> -x+-y     { (-x) + (-y) }
Chaque instruction valide comporte au plus un seul opérateur à deux arguments et deux opérandes. 
A noter que sont gérés automatiquement deux opérateurs - : celui de la soustraction et celui qui 
définit la valeur algébriquement opposée d'une constante ou d'une variable et qui n'est pas un 
opérateur à deux arguments. Un nom de variable est utilisable comme une constante. Cependant une 
variable peut contenir un nombre rationnel, par contre les constantes utilisables dans les 
instructions sont toujours des entiers. Ainsi l'instruction : a = b + 3/7 n'est pas admise parce 
qu'elle comporte deux opérateurs binaires. La division par 0 est possible : i = 1/0 définit 
l'infini positif et j = -1/0 définit l'infini négatif. Les variables déjà calculées sont ensuite 
conservées. Si on veut calculer plusieurs fois la même variable il faut soit la supprimer avant 
le nouveau calcul, soit en calculer plusieurs versions avec un suffixe servant de numéro d'ordre.

En complément des instructions de base ci-dessus expliquées il y a aussi les instructions suivantes :
> del var         pour supprimer la variable var
> out sauv.txt    pour sauvegarder toutes les variables actuelles dans le fichier sauv.txt
> exec fic.txt    pour exécuter le fichier de commandes fic.txt
> conv vr         pour convertir et afficher en nombre réel la variable vr
> conv x/123      pour convertir et afficher en nombre réel cette expression arithmétique
> enti vr         pour calculer et afficher la partie entière de la variable vr
> enti x*10000    pour calculer et afficher la partie entière de cette expression arithmétique
> liste           pour afficher toutes les variables actuelles
> aide            pour afficher un petit rappel de la syntaxe des instructions
> exit            pour terminer la session
Dans certaines circonstances, une instruction invalide déclenche automatiquement l'affichage 
de l'aide. Si on a effectué une sauvegarde, on peut très facilement utiliser le fichier obtenu 
pour restituer toutes les variables au début d'une autre session ultérieure ou bien pendant une 
session ultérieure. S'il existe déjà un fichier ayant le nom de la sauvegarde demandée, le 
fichier existant est protégé et conservé et la sauvegarde est annulée, avec un message, avant 
de la recommencer avec un nom différent. En phase conversationnelle on peut récupérer une 
instruction du passé récent avec la flèche <haut> du clavier puis l'exécuter identique ou modifiée. 

Avec la commande conv on obtient en forme usuelle un nombre réel qui donne une bonne valeur 
approchée d'une variable ou d'une expression arithmétique. Mais si on veut voir un grand nombre 
de chiffres significatifs exacts il faut utiliser en complément la commande enti qui calcule et 
affiche la partie entière d'une variable ou d'une expression arithmétique. Selon les cas on pourra 
faire par exemples : enti v*1000 ou enti v*1000000 etc. Ce qui permet facilement d'afficher autant 
de chiffres significatifs que l'on veut.

Pour créer un fichier d'exécution avec une phase initiale de fichier de commandes il est commode 
de préparer, comme le montre l'exemple joint, un fichier.bat ayant simplement les deux lignes :
@echo off
opera fichier.txt
Si le fichier.bat et le fichier.txt de lancement initial sont dans le même répertoire que le 
fichier opera.exe les fichiers de sauvegarde et de commandes seront habituellement dans ce 
répertoire. Mais avec les désignations appropriées on peut les disposer dans des répertoires 
différents, exemple :
> out monarchive\mesdata.txt
Ce qui suppose que le sous-répertoire monarchive existe préalablement.
                    
Il est souvent commode d'utiliser la fenêtre de la console Windows avec une hauteur assez grande. 
On peut l'obtenir avec la souris sur le bord inférieur ou bien avec le bouton <Agrandir>. 
Il y a une méthode plus complète pour l'effectuer : 
souris sur le bord supérieur et clic <droite> => Proriétés => Configuration => Taille de la fenêtre, 
ce qui permet aussi de faire d'autres réglages et de plus : Windows conservera ces réglages pour la 
prochaine fois, ce qui oblige à rétablir les réglages qu'on a modifiés si on ne veut pas les garder.
